{% extends "base.html" %}

{% block title %}Create Project - Task Manager{% endblock %}

{% block content %}
<!-- Dashboard Header -->
<div class="dashboard-header">
  <div class="header-content">
    <div class="page-title-section">
      <h1 class="gradient-text">
        <i class="fas fa-folder-plus"></i> 
        Create New Project
      </h1>
      <p class="page-subtitle">Set up a new project to organize tasks and track progress</p>
    </div>
    <div class="header-actions">
      <a href="{{ url_for('all_projects') }}" class="btn-compact btn-outline">
        <i class="fas fa-arrow-left"></i>
        <span>Back to Projects</span>
      </a>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="content-wrapper">
  <div class="form-container-modern">
    <form method="POST" class="modern-form">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <div class="form-section">
        <div class="form-group required">
          <label for="name">Project Name</label>
          <input type="text" id="name" name="name" required 
                 placeholder="e.g., Website Redesign, Mobile App, Q1 Marketing Campaign"
                 value="{{ request.form.name if request.form }}">
          <small class="form-hint">Choose a clear, descriptive name that reflects the project's goal</small>
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea id="description" name="description" rows="4" 
                    placeholder="Describe the project's objectives, scope, and key deliverables...">{{ request.form.description if request.form }}</textarea>
          <small class="form-hint">Help team members understand what this project aims to achieve</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="workspace_id">Workspace</label>
            <div class="select-wrapper">
              <select id="workspace_id" name="workspace_id">
                <option value="">Personal Project</option>
                {% for workspace in workspaces %}
                  <option value="{{ workspace.id }}" 
                          {% if request.form.workspace_id == workspace.id|string %}selected{% endif %}>
                    {{ workspace.name }}
                  </option>
                {% endfor %}
              </select>
              <i class="fas fa-chevron-down select-arrow"></i>
            </div>
            <small class="form-hint">Assign to a workspace for team collaboration or keep it personal</small>
          </div>

          <div class="form-group">
            <label for="color">Project Color</label>
            <div class="color-picker-container">
              <input type="color" id="color" name="color" class="color-picker-modern"
                     value="{{ request.form.color or '#3b82f6' }}">
              <span class="color-label">Theme Color</span>
            </div>
            <small class="form-hint">Choose a color theme to make your project easily recognizable</small>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-compact btn-primary">
            <i class="fas fa-rocket"></i>
            <span>Create Project</span>
          </button>
          <a href="{{ url_for('all_projects') }}" class="btn-compact btn-outline">
            <i class="fas fa-times"></i>
            <span>Cancel</span>
          </a>
        </div>
      </div>
    </form>
  </div>
  
  <!-- Project Benefits Info Card -->
  <div class="info-card">
    <div class="info-header">
      <h3><i class="fas fa-lightbulb"></i> What you can do with projects</h3>
    </div>
    <div class="info-content">
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-tasks"></i>
        </div>
        <div class="benefit-text">
          <strong>Organize Tasks</strong>
          <span>Group related tasks together for better project management</span>
        </div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="benefit-text">
          <strong>Team Collaboration</strong>
          <span>Assign tasks to team members and track progress</span>
        </div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="benefit-text">
          <strong>Progress Tracking</strong>
          <span>Monitor completion rates and project milestones</span>
        </div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon">
          <i class="fas fa-building"></i>
        </div>
        <div class="benefit-text">
          <strong>Workspace Integration</strong>
          <span>Connect projects to workspaces for organizational clarity</span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const colorInput = document.getElementById('color');
    const form = document.querySelector('.modern-form');
    const submitBtn = form.querySelector('button[type="submit"]');
    
    // Form submission with loading state
    form.addEventListener('submit', function(e) {
        const submitIcon = submitBtn.querySelector('i');
        const submitText = submitBtn.querySelector('span');
        submitIcon.className = 'fas fa-spinner fa-spin';
        submitText.textContent = 'Creating Project...';
        submitBtn.disabled = true;
        submitBtn.style.opacity = '0.7';
    });
    
    // Enhanced form validation
    const nameInput = document.getElementById('name');
    nameInput.addEventListener('input', function() {
        if (this.value.trim().length > 0) {
            this.style.borderColor = 'rgba(34, 197, 94, 0.5)';
        } else {
            this.style.borderColor = 'var(--border-glass)';
        }
    });
    
    // Form focus effects
    const inputs = form.querySelectorAll('input[type="text"], textarea, select');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
            if (this.value === '') {
                this.parentElement.classList.remove('focused');
            }
        });
        
        // Check if already has value on load
        if (input.value !== '') {
            input.parentElement.classList.add('focused');
        }
    });
});
</script>
{% endblock %}
