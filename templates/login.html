{% extends "auth_base.html" %}

{% block title %}Login - Task Manager{% endblock %}

{% block content %}
<div class="auth-form">
  <div class="auth-header">
    <h1 class="auth-title">Welcome back</h1>
    <p class="auth-subtitle">Sign in to continue to your dashboard</p>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        {% set cls = 'flash-success' if category in ['success', 'ok'] else 'flash-error' %}
        <div class="flash {{ cls }}">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="POST" action="{{ url_for('login') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <div class="form-group">
      <label class="form-label" for="email">Email</label>
      <input class="form-input" type="email" id="email" name="email" placeholder="you@example.com" value="{{ request.form.get('email', '') }}" required autofocus>
    </div>

    <div class="form-group">
      <label class="form-label" for="password">Password</label>
      <input class="form-input" type="password" id="password" name="password" placeholder="Your password" required>
    </div>

    <button type="submit" class="btn-auth">
      Sign In
    </button>
  </form>

  <div class="auth-link">
    Don't have an account? <a href="{{ url_for('register') }}">Create one</a>
  </div>
</div>
{% endblock %}
